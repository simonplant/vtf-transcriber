<!DOCTYPE html>
<!--
  @file popup.html
  @path src/popup.html
  @description Dashboard interface HTML for VTF audio transcription monitoring and controls
  @modified 2025-06-18
-->
<html>
<head>
  <meta charset="utf-8">
  <title>VTF Audio Transcriber</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="vtf-popup">
  <!-- Header -->
  <div class="vtf-header">
    <h1>VTF Audio Transcriber</h1>
  </div>

  <!-- Controls with Status -->
  <div class="vtf-controls-section">
    <button class="vtf-btn vtf-btn-success vtf-btn-sm" id="startBtn">Start</button>
    <div class="vtf-status-inline" id="captureStatus">
      <div class="vtf-status-indicator" id="statusIndicator"></div>
      <span>Not Capturing</span>
    </div>
    <button class="vtf-btn vtf-btn-danger vtf-btn-sm" id="stopBtn">Stop</button>
  </div>

  <!-- Main Metrics Dashboard -->
  <div class="vtf-section">
    <div class="vtf-grid vtf-grid-4">
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="chunksCount">0</div>
        <div class="vtf-metric-label">Audio Chunks</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="transcriptionCount">0</div>
        <div class="vtf-metric-label">Transcriptions</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="activeSpeakers">0</div>
        <div class="vtf-metric-label">Active Speakers</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="sessionCost">$0.00</div>
        <div class="vtf-metric-label">Session Cost</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="speechActivity">None</div>
        <div class="vtf-metric-label">Speech Activity</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="processingStatus">Idle</div>
        <div class="vtf-metric-label">Processing</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="lastTranscription">Never</div>
        <div class="vtf-metric-label">Last Transcription</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="audioQuality">Unknown</div>
        <div class="vtf-metric-label">Audio Quality</div>
      </div>
    </div>
  </div>

  <!-- Current Transcript Preview -->
  <div class="vtf-section">
    <h6 class="vtf-section-title">Current Transcript</h6>
    <div class="vtf-transcript-preview" id="currentTranscript">Waiting for audio...</div>
  </div>

  <!-- Performance -->
  <div class="vtf-section">
    <h6 class="vtf-section-title">Performance</h6>
    <div class="vtf-performance-stats" id="performanceMetrics">
      <span>API Calls: 0</span>
      <span>Avg Response: 0ms</span>
      <span>Error Rate: 0%</span>
    </div>
  </div>

  <!-- Voice Activity Detection -->
  <div class="vtf-section">
    <h6 class="vtf-section-title">Voice Activity Detection</h6>
    <div class="vtf-grid vtf-grid-4">
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="voiceActivity">0%</div>
        <div class="vtf-metric-label">Voice Activity</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="vadProbability">0.000</div>
        <div class="vtf-metric-label">VAD Confidence</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="signalNoise">0.0</div>
        <div class="vtf-metric-label">SNR (dB)</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="spectralCentroid">0</div>
        <div class="vtf-metric-label">Spectral (Hz)</div>
      </div>
    </div>
    <!-- Audio Level Visualization -->
    <div style="margin-top: 12px;">
      <canvas id="audioLevelCanvas" width="280" height="60" style="
        width: 100%;
        height: 60px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 4px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      "></canvas>
    </div>
  </div>

  <!-- Audio Channels -->
  <div class="vtf-section">
    <h6 class="vtf-section-title">Audio Channels</h6>
    <div class="vtf-grid vtf-grid-2">
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="activeChannels">0</div>
        <div class="vtf-metric-label">Active Channels</div>
      </div>
      <div class="vtf-metric">
        <div class="vtf-metric-value" id="totalTracks">0</div>
        <div class="vtf-metric-label">Total Tracks</div>
      </div>
    </div>
    <div class="vtf-channel-list" id="channelList">
      <div class="vtf-channel-empty">No active channels</div>
    </div>
  </div>

  <!-- Actions -->
  <div class="vtf-section">
    <h6 class="vtf-section-title">Actions</h6>
    <div class="vtf-actions">
      <button id="startBtn" class="vtf-btn vtf-btn-primary">Start Capture</button>
      <button id="stopBtn" class="vtf-btn vtf-btn-secondary" disabled>Stop Capture</button>
      <button id="copyBtn" class="vtf-btn">Copy All</button>
      <button id="exportBtn" class="vtf-btn">Export Session</button>
      <button id="dailyExportBtn" class="vtf-btn">Export Daily</button>
    </div>
  </div>

  <!-- Messages -->
  <div class="vtf-message vtf-message-error vtf-hidden" id="errorMessage"></div>
  <div class="vtf-message vtf-message-success vtf-hidden" id="successMessage"></div>

  <script src="popup.js"></script>
</body>
</html>